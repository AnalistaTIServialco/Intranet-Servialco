<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Carrusel Banner Automático</title>

<style>
    body {
        margin: 0;
        padding: 0;
        background: transparent;
    }

    .slider {
        width: 900px;      
        height: 550px;     
        overflow: hidden;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        margin: auto;
        background: transparent; /* Fondo negro por si la imagen es pequeña */
    }

    .slides {
        display: flex;
        height: 100%;
        transition: transform 0.8s ease-in-out;
    }

    .slides img {
        width: 100%;
        height: 100%;
        object-fit: contain; 
        flex-shrink: 0;
    }
</style>
</head>

<body>

<div class="slider">
    <div class="slides" id="slides"></div>
</div>

<script>
const usuario = "AnalistaTIServialco";
const repo = "Intranet-Servialco";

const ruta = "INTRANET/3.) SEGURIDAD DE LA INFORMACION - COMUNICADOS";
const rutaAPI = ruta.split("/").map(encodeURIComponent).join("/");

const urlAPI = `https://api.github.com/repos/${usuario}/${repo}/contents/${rutaAPI}`;

const slidesContainer = document.getElementById("slides");

let index = 0;
let totalImages = 0;

async function inicializarCarrusel() {
    try {
        const respuesta = await fetch(urlAPI);
        const archivos = await respuesta.json();

        console.log("Archivos:", archivos);

        const imagenes = archivos.filter(a =>
            a.name.match(/\.(jpg|jpeg|png|gif|webp)$/i)
        );

        totalImages = imagenes.length;

        if (!totalImages) {
            console.error("No hay imágenes en la carpeta");
            return;
        }

        imagenes.forEach(a => {
            const img = document.createElement("img");
            img.src = a.download_url;
            slidesContainer.appendChild(img);
        });

        iniciarAnimacion();

    } catch (e) {
        console.error("Error:", e);
    }
}

function iniciarAnimacion() {
    setInterval(() => {
        index = (index + 1) % totalImages;
        slidesContainer.style.transform =
            `translateX(-${index * 100}%)`;
    }, 4000);
}

inicializarCarrusel();
</script>


</body>
</html>



